"use strict";require("../sub-vendors.js");
(wx["webpackJsonp"] = wx["webpackJsonp"] || []).push([["pages2/course/index"],{

/***/ "../../node_modules/.pnpm/babel-loader@8.2.1_@babel+core@7.26.9_webpack@5.78.0_@swc+core@1.3.23_/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./src/pages2/course/index.tsx":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/babel-loader@8.2.1_@babel+core@7.26.9_webpack@5.78.0_@swc+core@1.3.23_/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./src/pages2/course/index.tsx ***!
  \********************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/slicedToArray.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/classCallCheck.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/createClass.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_callSuper_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/callSuper.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/callSuper.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/inherits.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/defineProperty.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "webpack/container/remote/react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ "webpack/container/remote/react-redux");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _tarojs_taro__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tarojs/taro */ "webpack/container/remote/@tarojs/taro");
/* harmony import */ var _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_tarojs_taro__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _tarojs_components__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @tarojs/components */ "../../node_modules/.pnpm/@tarojs+plugin-platform-weapp@3.6.13_@types+react@18.3.18_postcss@8.5.2/node_modules/@tarojs/plugin-platform-weapp/dist/components-react.js");
/* harmony import */ var _utils_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/router */ "./src/utils/router.ts");
/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/request */ "./src/utils/request.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/utils */ "./src/utils/index.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components */ "./src/components/index.ts");
/* harmony import */ var _services_week__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/services/week */ "./src/services/week.ts");
/* harmony import */ var _assets_icon_icon_info_png__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/assets/icon/icon_info.png */ "./src/assets/icon/icon_info.png");
/* harmony import */ var _assets_icon_error_icon_png__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/assets/icon/error_icon.png */ "./src/assets/icon/error_icon.png");
/* harmony import */ var _redux_actions_user__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/redux/actions/user */ "./src/redux/actions/user.ts");
/* harmony import */ var redux__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! redux */ "webpack/container/remote/redux");
/* harmony import */ var redux__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(redux__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react/jsx-runtime */ "webpack/container/remote/react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);






















// images


var thisWeekStorage = _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().getStorageSync('course:week') || 3;
var interstitialAd;
var Course = /*#__PURE__*/function (_Component) {
  function Course() {
    var _this;
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_13__["default"])(this, Course);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_callSuper_js__WEBPACK_IMPORTED_MODULE_14__["default"])(this, Course, [].concat(args));
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "state", {
      loading: false,
      slectedWeek: thisWeekStorage ? thisWeekStorage - 1 : 0,
      thisWeek: thisWeekStorage || 1,
      thisWeekNum: thisWeekStorage || 1,
      nowDayIndex: new Date().getDay(),
      // termId: 0,
      courseData: [],
      unplanCourse: [],
      selectOpen: false,
      // currentTerm: 0,
      isShowCaptchaModal: false,
      captchaImage: ''
    });
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "courseCardStyleMap", Array.from(new Array(14)).map(function (_, index) {
      return 'class' + (index + 1);
    }));
    // 周
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "weeks", Array.from(new Array(25), function (_, index) {
      return index + 1;
    }));
    // 用户信息
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "userInfo", {});
    // 学期
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "terms", ['大一 第1学期', '大一 第2学期', '大二 第1学期', '大二 第2学期', '大三 第1学期', '大三 第2学期', '大四 第1学期', '大四 第2学期', '大五 第1学期', '大五 第2学期']);
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "dayNum", ['周一', '周二', '周三', '周四', '周五', '周六', '周日']);
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "time", [['1', '2'], ['3', '4'], ['5', '6'], ['7', '8'], ['9', '10']]);
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "month", new Date().getMonth() + 1);
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "unplanCourseTitle", ['课程名称', '任课教师', '合班', '上课周次', '上课时间', '上课地点']);
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "getTime", function () {
      var time = [['1', '2'], ['3', '4'], ['5', '6'], ['7', '8'], ['9', '10']];
      if (_this.state.courseData.length > 10) {
        time.push(['11', '12']);
        return time;
      }
      return time;
    });
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "timeList", function () {
      var currentTerm = +_this.props.currentTerm;
      // 大一
      if (currentTerm === 0 || currentTerm === 1) {
        return [['08:00', '09:35'], ['09:50', '11:25'], ['13:30', '15.05'], ['15:30', '17:05'], ['18:10', '19:45'], ['19:50', '21:25']
        // ['08:00', '09:25'],
        // ['09:50', '11:15'],
        // ['13:30', '14:55'],
        // ['15:30', '16:55'],
        // ['18:10', '19:35'],
        // ['19:50', '21:15'],
        ];
      }

      // 大二
      if (currentTerm === 2 || currentTerm === 3) {
        return [['08:05', '09:40'], ['10:10', '11:45'], ['13:35', '15:10'], ['15:45', '17:20'], ['18:15', '19:50'], ['19:55', '21:30']
        // ['08:05', '09:30'],
        // ['10:10', '11:35'],
        // ['13:35', '15:00'],
        // ['15:45', '17:10'],
        // ['18:15', '19:40'],
        // ['19:55', '21:20'],
        ];
      }

      // 大三
      if (currentTerm === 4 || currentTerm === 5) {
        return [['08:10', '09:45'], ['10:30', '12:05'], ['13:40', '15:15'], ['16:00', '17:35'], ['18:20', '19:55'], ['20:00', '21:35']
        // ['08:10', '09:35'],
        // ['10:30', '11:55'],
        // ['13:40', '15:05'],
        // ['16:00', '17:25'],
        // ['18:20', '19:45'],
        // ['20:00', '21:25'],
        ];
      }
      return [['08:10', '09:45'], ['10:30', '12:05'], ['13:40', '15:15'], ['16:00', '17:35'], ['18:20', '19:55'], ['20:00', '21:35']
      // ['08:15', '09:40'],
      // ['10:50', '12:15'],
      // ['13:45', '15:10'],
      // ['16:15', '17:40'],
      // ['18:25', '19:50'],
      // ['20:05', '21:30'],
      ];
    });
    // 同步课程表
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "syncCourse", /*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_16__["default"])(/*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().mark(function _callee() {
      var captcha,
        _yield$cError,
        _yield$cError2,
        createNewTermError,
        _args = arguments;
      return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            captcha = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';
            _this.setLoading(true);
            // this.selectOpen = false
            _this.setState({
              selectOpen: false
            });
            _context.next = 5;
            return (0,_utils__WEBPACK_IMPORTED_MODULE_5__.cError)(_this.createNewTerm(_this.props.currentTerm, captcha));
          case 5:
            _yield$cError = _context.sent;
            _yield$cError2 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_18__["default"])(_yield$cError, 1);
            createNewTermError = _yield$cError2[0];
            _this.setLoading(false);
            if (!createNewTermError) {
              _context.next = 11;
              break;
            }
            return _context.abrupt("return");
          case 11:
            _context.next = 13;
            return _this.getCourseHandel(_this.props.currentTerm);
          case 13:
          case "end":
            return _context.stop();
        }
      }, _callee);
    })));
    // 创建新学期
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "createNewTerm", /*#__PURE__*/function () {
      var _ref2 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_16__["default"])(/*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().mark(function _callee2(term) {
        var captcha,
          reqData,
          _yield$cError3,
          _yield$cError4,
          err,
          res,
          status,
          _args2 = arguments;
        return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              captcha = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : '';
              if (!(term === undefined)) {
                _context2.next = 3;
                break;
              }
              return _context2.abrupt("return");
            case 3:
              reqData = {
                term: term,
                captcha: captcha
              };
              _context2.next = 6;
              return (0,_utils__WEBPACK_IMPORTED_MODULE_5__.cError)((0,_utils_request__WEBPACK_IMPORTED_MODULE_4__["default"])({
                url: '/api/hrbust/updateCourse',
                data: reqData
              }));
            case 6:
              _yield$cError3 = _context2.sent;
              _yield$cError4 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_18__["default"])(_yield$cError3, 2);
              err = _yield$cError4[0];
              res = _yield$cError4[1];
              status = res.status;
              if (!(status === 404)) {
                _context2.next = 14;
                break;
              }
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showToast({
                title: '课表为空',
                image: _assets_icon_icon_info_png__WEBPACK_IMPORTED_MODULE_8__,
                duration: 1000
              });
              return _context2.abrupt("return", Promise.reject('课表为空'));
            case 14:
              if (!(status === 400006)) {
                _context2.next = 17;
                break;
              }
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showModal({
                title: '账号密码错误',
                content: '可能是您近期更改教务在线密码了，是否重新登录？',
                success: function success(r) {
                  if (r.confirm) {
                    _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().reLaunch({
                      url: _utils_router__WEBPACK_IMPORTED_MODULE_3__.routes.login
                    });
                    // console.log('用户点击确定')
                  } else if (r.cancel) {
                    // console.log('用户点击取消')
                    _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().switchTab({
                      url: _utils_router__WEBPACK_IMPORTED_MODULE_3__.routes.index
                    });
                  }
                }
              });
              return _context2.abrupt("return", Promise.reject('账号密码错误'));
            case 17:
              if (!(res.status === 400005)) {
                _context2.next = 20;
                break;
              }
              _this.showCaptchaModal(res.data.captcha);
              return _context2.abrupt("return", Promise.reject('登录失效，需要输入验证码'));
            case 20:
              if (!(res.status === 400001)) {
                _context2.next = 23;
                break;
              }
              (0,_utils__WEBPACK_IMPORTED_MODULE_5__.showToast)({
                title: '验证码输入错误，请重新输入',
                complete: function complete() {
                  _this.showCaptchaModal(res.data.captcha);
                }
              });
              return _context2.abrupt("return", Promise.reject('验证码输入错误，请重新输入'));
            case 23:
              if (!err) {
                _context2.next = 26;
                break;
              }
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showToast({
                title: '抓取课表失败',
                image: _assets_icon_error_icon_png__WEBPACK_IMPORTED_MODULE_9__,
                duration: 1000
              });
              return _context2.abrupt("return", Promise.reject('抓取课表失败'));
            case 26:
              return _context2.abrupt("return", Promise.resolve(res));
            case 27:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }));
      return function (_x) {
        return _ref2.apply(this, arguments);
      };
    }());
    // 验证码弹窗确认
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "onCaptchaModalSubmit", function (captcha) {
      _this.setState({
        isShowCaptchaModal: false
      });
      _this.syncCourse(captcha);
    });
    // 展示验证码弹窗
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "showCaptchaModal", function (captcha) {
      _this.setState({
        captchaImage: captcha,
        isShowCaptchaModal: true
      });
    });
    // 选择第几周
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "changeWeek", function (event) {
      _this.setState({
        slectedWeek: event.detail.value,
        thisWeek: parseInt(String(_this.weeks[event.detail.value])),
        selectOpen: false
      });
    });
    // 右上角加号，更新学期
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "selectListSwitch", function () {
      _this.setState({
        selectOpen: !_this.state.selectOpen
      });
    });
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "setLoading", function (loading) {
      _this.setState({
        loading: loading
      });
    });
    // 获取课表
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "getCourseHandel", /*#__PURE__*/function () {
      var _ref3 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_16__["default"])(/*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().mark(function _callee3(term) {
        var _yield$cError5, _yield$cError6, getCourseError;
        return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              // console.log(term)
              _this.setLoading(true);
              _this.setState({
                selectOpen: false
              });
              _context3.next = 4;
              return (0,_utils__WEBPACK_IMPORTED_MODULE_5__.cError)(_this.getCourse(term));
            case 4:
              _yield$cError5 = _context3.sent;
              _yield$cError6 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_18__["default"])(_yield$cError5, 1);
              getCourseError = _yield$cError6[0];
              _this.setLoading(false);
              if (!getCourseError) {
                _context3.next = 11;
                break;
              }
              if (getCourseError.message === '课表为空') {
                _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showToast({
                  title: '课表为空',
                  image: _assets_icon_icon_info_png__WEBPACK_IMPORTED_MODULE_8__,
                  duration: 1000
                });
              }
              return _context3.abrupt("return");
            case 11:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }));
      return function (_x2) {
        return _ref3.apply(this, arguments);
      };
    }());
    // 获取课表接口处理
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "getCourse", /*#__PURE__*/function () {
      var _ref4 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_16__["default"])(/*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().mark(function _callee4(term) {
        var _yield$cError7, _yield$cError8, err, res, _res$data, getCourseData, courseTermId, unplanCourse, courseList, courseIdList, courseCardStyleIndex, i, userInfo;
        return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return (0,_utils__WEBPACK_IMPORTED_MODULE_5__.cError)((0,_utils_request__WEBPACK_IMPORTED_MODULE_4__["default"])({
                url: '/api/hrbust/course',
                data: {
                  term: term
                }
              }));
            case 2:
              _yield$cError7 = _context4.sent;
              _yield$cError8 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_18__["default"])(_yield$cError7, 2);
              err = _yield$cError8[0];
              res = _yield$cError8[1];
              if (!err) {
                _context4.next = 9;
                break;
              }
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showToast({
                title: '获取课表失败',
                image: _assets_icon_error_icon_png__WEBPACK_IMPORTED_MODULE_9__,
                duration: 1000
              });
              return _context4.abrupt("return", Promise.reject('获取课表失败'));
            case 9:
              _res$data = res.data, getCourseData = _res$data.course, courseTermId = _res$data.courseTermId, unplanCourse = _res$data.unplanCourse;
              _this.setState({
                // termId: courseTermId,
                unplanCourse: unplanCourse || []
              });
              // const getCourseData = res.data.data.course
              // 课表为空的话，提示
              if (!(!getCourseData && !unplanCourse)) {
                _context4.next = 14;
                break;
              }
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showModal({
                content: '该学期未查询到课表，请创建该学期',
                showCancel: false,
                success: function success() {
                  _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().navigateTo({
                    url: _utils_router__WEBPACK_IMPORTED_MODULE_3__.routes.courseTerm
                  });
                }
              });
              return _context4.abrupt("return");
            case 14:
              // 处理返回数据
              courseList = [];
              courseIdList = {};
              courseCardStyleIndex = 0;
              for (i = 0; i < 10; i++) {
                courseList[i] = [];
              }
              getCourseData.forEach(function (courseItem) {
                if (!courseIdList[courseItem.courseId]) {
                  var cardClassName = _this.courseCardStyleMap[courseCardStyleIndex % _this.courseCardStyleMap.length];
                  courseIdList[courseItem.courseId] = cardClassName;
                  courseItem.class = cardClassName;
                  courseCardStyleIndex++;
                } else {
                  courseItem.class = courseIdList[courseItem.courseId];
                }

                // 兼容 12 节课的情况
                if (!courseList[courseItem.sectionstart]) {
                  courseList[courseItem.sectionstart] = [];
                }
                courseList[courseItem.sectionstart].push(courseItem);
              });
              _this.setState({
                courseData: courseList
              });

              // 学期数、课程、未安排课程存入Storage
              userInfo = {
                term: term,
                course: courseList,
                unplanCourse: unplanCourse
              };
              _this.userInfo = userInfo;
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().setStorage({
                key: "course:".concat(_this.props.user.studentInfo.username),
                data: userInfo
              });
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showToast({
                title: '获取课表成功',
                icon: 'success',
                duration: 1000
              });
              return _context4.abrupt("return", Promise.resolve());
            case 25:
            case "end":
              return _context4.stop();
          }
        }, _callee4);
      }));
      return function (_x3) {
        return _ref4.apply(this, arguments);
      };
    }());
    // 课程详情
    (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_15__["default"])(_this, "detailHandler", function (dayIndex, timeIndex) {
      _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().navigateTo({
        url: "".concat(_utils_router__WEBPACK_IMPORTED_MODULE_3__.routes.courseDetail, "?dayIndex=").concat(dayIndex, "&timeIndex=").concat(timeIndex, "&thisWeek=").concat(_this.state.thisWeek)
      });
    });
    return _this;
  }
  (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_19__["default"])(Course, _Component);
  return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_20__["default"])(Course, [{
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      if (this.props.currentTerm !== nextProps.currentTerm) {
        this.getCourseHandel(nextProps.currentTerm);
      }
    }
  }, {
    key: "onLoad",
    value: function () {
      var _onLoad = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_16__["default"])(/*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().mark(function _callee5() {
        var username, userInfo, course, unplanCourse;
        return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              // 在页面onLoad回调事件中创建插屏广告实例
              interstitialAd = _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().createInterstitialAd({
                adUnitId: 'adunit-167f2a17e8f9ecc4'
              });
              interstitialAd.onLoad(function () {});
              interstitialAd.onError(function () {});
              interstitialAd.onClose(function () {});

              // 分享
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showShareMenu({
                withShareTicket: true
              });
              username = this.props.user.studentInfo.username; //  || '1705030215'
              // 未登陆跳转
              if (username) {
                _context5.next = 8;
                break;
              }
              return _context5.abrupt("return", _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().reLaunch({
                url: _utils_router__WEBPACK_IMPORTED_MODULE_3__.routes.index
              }));
            case 8:
              // 获取storage数据
              userInfo = _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().getStorageSync("course:".concat(username));
              if (userInfo) {
                this.userInfo = userInfo || {};
                this.props.setCurrentTerm(this.userInfo.term);
              }
              this.setLoading(true);

              // 获取当前周数、以及学期数
              // TODO: 优化 优先本地取 term 和 week
              this.getWeekAndTerm();
              course = this.userInfo.course;
              unplanCourse = this.userInfo.unplanCourse;
              if (course) {
                // storage 存在课程数据，直接渲染
                this.setState({
                  courseData: course,
                  unplanCourse: unplanCourse
                });
                this.setLoading(false);
              } else {
                // storage不存在课程数据，发送请求，重新获取，并存入storage
                this.getCourseHandel(this.props.currentTerm);
              }
            case 15:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function onLoad() {
        return _onLoad.apply(this, arguments);
      }
      return onLoad;
    }()
  }, {
    key: "onShow",
    value: function onShow() {
      // 在适合的场景显示插屏广告
      if (interstitialAd) {
        interstitialAd.show().catch(function (err) {
          console.log(err);
        });
      }
    }

    // 下拉同步课表
  }, {
    key: "onPullDownRefresh",
    value: function () {
      var _onPullDownRefresh = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_16__["default"])(/*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().mark(function _callee6() {
        return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              this.syncCourse();
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().stopPullDownRefresh();
            case 2:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function onPullDownRefresh() {
        return _onPullDownRefresh.apply(this, arguments);
      }
      return onPullDownRefresh;
    }()
  }, {
    key: "getWeekAndTerm",
    value:
    // 获取周、学期
    function () {
      var _getWeekAndTerm2 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_16__["default"])(/*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().mark(function _callee7() {
        var _yield$cError9, _yield$cError10, err, res, week, MAX_WEEK_NUM, isExceed, thisWeek, slectedWeek;
        return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_17__["default"])().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              _context7.next = 2;
              return (0,_utils__WEBPACK_IMPORTED_MODULE_5__.cError)((0,_services_week__WEBPACK_IMPORTED_MODULE_7__.getWeekAndTerm)(this.userInfo.term));
            case 2:
              _yield$cError9 = _context7.sent;
              _yield$cError10 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_18__["default"])(_yield$cError9, 2);
              err = _yield$cError10[0];
              res = _yield$cError10[1];
              if (!err) {
                _context7.next = 9;
                break;
              }
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().showModal({
                content: '服务器故障，获取周数错误，请稍后重试。',
                showCancel: false,
                success: function success() {
                  _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().reLaunch({
                    url: _utils_router__WEBPACK_IMPORTED_MODULE_3__.routes.index
                  });
                }
              });
              return _context7.abrupt("return", Promise.reject('获取周数错误'));
            case 9:
              week = res.week; // 设置当前周数，如果教务在线获取的周数超过25周，当前周数设置为25
              MAX_WEEK_NUM = 25;
              isExceed = week > MAX_WEEK_NUM;
              thisWeek = isExceed ? MAX_WEEK_NUM : week;
              slectedWeek = isExceed ? MAX_WEEK_NUM - 1 : week - 1;
              this.setState({
                thisWeek: thisWeek,
                thisWeekNum: thisWeek,
                slectedWeek: slectedWeek
                // currentTerm: term,
              });
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().setStorage({
                key: 'course:week',
                data: thisWeek
              });
              _tarojs_taro__WEBPACK_IMPORTED_MODULE_2___default().setStorage({
                key: 'course:week.timestamp',
                data: Date.now()
              });
              return _context7.abrupt("return", Promise.resolve());
            case 18:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function getWeekAndTerm() {
        return _getWeekAndTerm2.apply(this, arguments);
      }
      return getWeekAndTerm;
    }()
  }, {
    key: "currentWeekList",
    value: function currentWeekList() {
      var week;
      var _this$state = this.state,
        thisWeekNum = _this$state.thisWeekNum,
        slectedWeek = _this$state.slectedWeek;
      if (thisWeekNum === 25) {
        if (slectedWeek === 24) {
          week = 0;
        } else {
          week = +slectedWeek + 1;
        }
      } else {
        week = slectedWeek - thisWeekNum + 1;
      }
      var aDayTimeStamp = 24 * 60 * 60 * 1000;
      var aWeekTimeStamp = 7 * aDayTimeStamp;
      var timeStamp = Date.now() + week * aWeekTimeStamp;
      var currentDay = new Date(timeStamp).getDay();
      var month = new Date(timeStamp + aDayTimeStamp * (currentDay + 6) % 7).getMonth() + 1;
      var days = Array.from(new Array(7)).map(function (_, i) {
        return new Date(timeStamp + aDayTimeStamp * (i - (currentDay + 6) % 7)).getDate();
      });
      return {
        days: days,
        month: month
      };
    }
  }, {
    key: "currentPart",
    value: function currentPart() {
      var date = new Date();
      var hour = date.getHours();
      var minute = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();
      var dateNum = parseInt('' + hour + minute);
      if (dateNum >= 600 && dateNum <= 950) {
        return 0;
      } else if (dateNum > 950 && dateNum <= 1230) {
        return 1;
      } else if (dateNum > 1230 && dateNum <= 1520) {
        return 2;
      } else if (dateNum > 1520 && dateNum <= 1730) {
        return 3;
      } else if (dateNum > 1730 && dateNum <= 1850) {
        return 4;
      } else {
        return -1;
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;
      var _this$state2 = this.state,
        slectedWeek = _this$state2.slectedWeek,
        thisWeekNum = _this$state2.thisWeekNum,
        selectOpen = _this$state2.selectOpen,
        nowDayIndex = _this$state2.nowDayIndex,
        unplanCourse = _this$state2.unplanCourse,
        courseData = _this$state2.courseData,
        thisWeek = _this$state2.thisWeek,
        loading = _this$state2.loading,
        isShowCaptchaModal = _this$state2.isShowCaptchaModal,
        captchaImage = _this$state2.captchaImage;
      var currentTerm = this.props.currentTerm;
      var currentWeekList = this.currentWeekList();
      var currentPart = this.currentPart();
      var timeList = this.timeList();
      var time = this.getTime();
      if (loading) {
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components__WEBPACK_IMPORTED_MODULE_6__.Loading, {
          loading: true
        });
      }
      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
        className: "course-page",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components__WEBPACK_IMPORTED_MODULE_6__.CaptchaModal, {
          captchaImage: captchaImage,
          onSubmit: this.onCaptchaModalSubmit,
          isOpened: isShowCaptchaModal
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
          className: "wrap",
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
            className: "refresh",
            children: "\u66F4\u65B0\u8BFE\u8868\u8BF7\u4E0B\u62C9\u5237\u65B0"
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
            className: "picker-wrapper",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
              className: "wrapper-left"
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.Picker, {
              mode: "selector",
              onChange: this.changeWeek,
              value: slectedWeek,
              range: this.weeks,
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  children: ["\u7B2C", /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("text", {
                    className: "num",
                    children: [' ', this.weeks.length > 0 ? this.weeks[slectedWeek] : 0, ' ']
                  }), "\u5468", this.weeks[slectedWeek] == thisWeekNum && '(当前)']
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  children: this.terms[currentTerm]
                })]
              })
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
              className: "wrapper-right ".concat(selectOpen ? 'rotate' : ''),
              onClick: this.selectListSwitch,
              children: "+"
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
            className: "tips",
            children: "*\u6BCF\u8282\u8BFE\u4E0A\u8BFE\u65F6\u95F4\u4EC5\u4F9B\u53C2\u8003\uFF0C\u5177\u4F53\u65F6\u95F4\u4EE5\u4E0D\u540C\u5E74\u7EA7\u5B9E\u9645\u60C5\u51B5\u4E3A\u51C6"
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
            className: "course-header",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
              className: "item",
              children: [currentWeekList.month, "\u6708"]
            }), this.dayNum.map(function (dayItem, dayIndex) {
              return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                className: "item ".concat(dayIndex + 1 === nowDayIndex ? 'now-day' : ''),
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  children: dayItem
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  children: [currentWeekList.days[dayIndex], "\u65E5"]
                })]
              }, dayIndex);
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
            className: "course-body",
            children: time.map(function (timeItem, timeIndex) {
              return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                className: "line-item",
                children: [0, 1, 2, 3, 4, 5, 6, 7].map(function (_, dayIndex) {
                  if (dayIndex === 0) {
                    // <!-- 左侧时间列表 -->
                    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                      className: "time item ".concat(currentPart === timeIndex ? 'now-time' : ''),
                      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                        className: "time-item",
                        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                          children: ["\u7B2C", timeItem[0], "/", timeItem[1], "\u8282"]
                        })
                      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                        className: "time-item-num",
                        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                          children: timeList[timeIndex][0]
                        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                          children: "~"
                        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                          children: timeList[timeIndex][1]
                        })]
                      })]
                    }, dayIndex);
                  }
                  // <!-- 课表内容 -->
                  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                    className: "item",
                    onClick: function onClick() {
                      return _this2.detailHandler(dayIndex, timeItem[0]);
                    },
                    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                      className: "item-content",
                      children: courseData.length > 0 && courseData[timeItem[0]].map(function (item, index) {
                        if (item.day != dayIndex) {
                          return null;
                        }
                        if (+item.period[thisWeek] === 1) {
                          return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                            className: "this-week ".concat(item.class, " ").concat(item.day === nowDayIndex && (currentPart + 1) * 2 === item.sectionend ? 'use-border' : ''),
                            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.Text, {
                              children: ["\u300A", item.name, "\u300B@", item.locale]
                            })
                          }, index);
                        }
                        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                          className: "no-this-week",
                          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("text", {
                            children: ["\u300A", item.name, "\u300B@", item.locale]
                          })
                        }, index);
                      })
                    })
                  }, dayIndex);
                })
              }, timeItem[0]);
            })
          }), unplanCourse.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
            className: "unplan-course",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
              className: "title",
              children: "\u6CA1\u6709\u5177\u4F53\u4E0A\u8BFE\u65F6\u95F4\u6216\u5730\u70B9\u7684\u8BFE\u7A0B"
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
              className: "content",
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                className: "content-header",
                children: this.unplanCourseTitle.map(function (item, index) {
                  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                    children: item
                  }, index);
                })
              }), unplanCourse.map(function (unplanCourseObj, i) {
                return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  className: "unplan-item",
                  children: Object.keys(unplanCourseObj).map(function (key) {
                    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.Text, {
                        className: "text",
                        children: unplanCourseObj[key]
                      })
                    }, key);
                  })
                }, i);
              })]
            })]
          }), selectOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
            className: "select-list",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
              className: "empty-top",
              onClick: this.selectListSwitch
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
              className: "select-wrapper",
              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.Navigator, {
                url: _utils_router__WEBPACK_IMPORTED_MODULE_3__.routes.courseTerm,
                className: "select-item",
                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  className: "select-text",
                  children: "\u9009\u62E9\u5B66\u671F"
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  className: "select-data",
                  children: this.terms[currentTerm]
                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  className: "select-arrow"
                })]
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.Picker, {
                mode: "selector",
                onChange: this.changeWeek,
                value: slectedWeek,
                range: this.weeks,
                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                  className: "select-item",
                  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                    className: "select-text",
                    children: "\u9009\u62E9\u5468\u6570"
                  }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                    className: "select-data",
                    children: ["\u7B2C", /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.Text, {
                      className: "num",
                      children: [' ', this.weeks.length > 0 ? this.weeks[slectedWeek] : 0, ' ']
                    }), "\u5468", this.weeks[slectedWeek] == thisWeekNum && '(当前)']
                  }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
                    className: "select-arrow"
                  })]
                })
              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.Button, {
                type: "primary",
                onClick: function onClick() {
                  return _this2.syncCourse();
                },
                children: "\u540C\u6B65\u6559\u52A1\u5728\u7EBF\u8BFE\u8868"
              })]
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.View, {
              className: "empty-bottom",
              onClick: this.selectListSwitch
            })]
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_tarojs_components__WEBPACK_IMPORTED_MODULE_21__.Ad, {
            className: "advertising",
            unitId: "adunit-f1ef7db925a525a8"
          })]
        })]
      });
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var mapStateToProps = function mapStateToProps(state) {
  return {
    user: state.user,
    currentTerm: state.user.currentTerm
  };
};
var mapDispatchToProps = function mapDispatchToProps(dispatch) {
  return (0,redux__WEBPACK_IMPORTED_MODULE_11__.bindActionCreators)({
    setCurrentTerm: _redux_actions_user__WEBPACK_IMPORTED_MODULE_10__.setCurrentTerm
  }, dispatch);
};
/* harmony default export */ __webpack_exports__["default"] = ((0,react_redux__WEBPACK_IMPORTED_MODULE_1__.connect)(mapStateToProps, mapDispatchToProps)(Course));

/***/ }),

/***/ "./src/pages2/course/index.tsx":
/*!*************************************!*\
  !*** ./src/pages2/course/index.tsx ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) {

/* harmony import */ var _tarojs_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tarojs/runtime */ "webpack/container/remote/@tarojs/runtime");
/* harmony import */ var _tarojs_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_tarojs_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_pnpm_babel_loader_8_2_1_babel_core_7_26_9_webpack_5_78_0_swc_core_1_3_23_node_modules_babel_loader_lib_index_js_ruleSet_1_rules_5_use_0_index_tsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../node_modules/.pnpm/babel-loader@8.2.1_@babel+core@7.26.9_webpack@5.78.0_@swc+core@1.3.23_/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./index.tsx */ "../../node_modules/.pnpm/babel-loader@8.2.1_@babel+core@7.26.9_webpack@5.78.0_@swc+core@1.3.23_/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./src/pages2/course/index.tsx");


var config = {"navigationBarTitleText":"课程表","enablePullDownRefresh":true};


var inst = Page((0,_tarojs_runtime__WEBPACK_IMPORTED_MODULE_0__.createPageConfig)(_node_modules_pnpm_babel_loader_8_2_1_babel_core_7_26_9_webpack_5_78_0_swc_core_1_3_23_node_modules_babel_loader_lib_index_js_ruleSet_1_rules_5_use_0_index_tsx__WEBPACK_IMPORTED_MODULE_1__["default"], 'pages2/course/index', {root:{cn:[]}}, config || {}))


/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_pnpm_babel_loader_8_2_1_babel_core_7_26_9_webpack_5_78_0_swc_core_1_3_23_node_modules_babel_loader_lib_index_js_ruleSet_1_rules_5_use_0_index_tsx__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/services/week.ts":
/*!******************************!*\
  !*** ./src/services/week.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getWeekAndTerm": function() { return /* binding */ getWeekAndTerm; }
/* harmony export */ });
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/slicedToArray.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ "../../node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils */ "./src/utils/index.ts");
/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/request */ "./src/utils/request.ts");
/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/redux/store */ "./src/redux/store/index.ts");
/* harmony import */ var _redux_actions_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/redux/actions/user */ "./src/redux/actions/user.ts");








// 获取周、学期
var getWeekAndTerm = /*#__PURE__*/function () {
  var _ref = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__["default"])(/*#__PURE__*/(0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_5__["default"])().mark(function _callee(defaultTerm) {
    var _yield$cError, _yield$cError2, err, res, _res$data, onlineWeek, onlineTerm, MAX_WEEK_NUM, isExceed, term, thisWeek;
    return (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_5__["default"])().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.cError)((0,_utils_request__WEBPACK_IMPORTED_MODULE_1__["default"])({
            url: '/api/hrbust/week'
          }));
        case 2:
          _yield$cError = _context.sent;
          _yield$cError2 = (0,_Users_bytedance_my_src_idea_wechat_app_hrbust_node_modules_pnpm_babel_runtime_7_26_9_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__["default"])(_yield$cError, 2);
          err = _yield$cError2[0];
          res = _yield$cError2[1];
          if (!err) {
            _context.next = 8;
            break;
          }
          return _context.abrupt("return", Promise.reject('获取周数错误'));
        case 8:
          _res$data = res.data, onlineWeek = _res$data.week, onlineTerm = _res$data.term; // 设置当前周数，如果教务在线获取的周数超过25周，当前周数设置为25
          MAX_WEEK_NUM = 25;
          isExceed = onlineWeek > MAX_WEEK_NUM;
          term = defaultTerm || onlineTerm;
          thisWeek = isExceed ? MAX_WEEK_NUM : onlineWeek;
          _context.next = 15;
          return _redux_store__WEBPACK_IMPORTED_MODULE_2__.store.dispatch((0,_redux_actions_user__WEBPACK_IMPORTED_MODULE_3__.setCurrentTerm)(term));
        case 15:
          return _context.abrupt("return", Promise.resolve({
            term: term,
            week: thisWeek
          }));
        case 16:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return function getWeekAndTerm(_x) {
    return _ref.apply(this, arguments);
  };
}();

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["pages2/sub-vendors","taro","vendors","common"], function() { return __webpack_exec__("./src/pages2/course/index.tsx"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=index.js.map