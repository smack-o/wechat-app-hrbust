{"version":3,"file":"pages2/grade/share/index.js","mappings":";;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAGA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAQA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAqBA;AACA;AACA;;AAEA;AAEA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://wechat-app-hrbust/._src_pages2_grade_share_index.tsx","webpack://wechat-app-hrbust/._src_pages2_grade_share_demo.js","webpack://wechat-app-hrbust/./src/pages2/grade/share/index.tsx?4597"],"sourcesContent":["import React from 'react'\nimport { View } from '@tarojs/components'\nimport { Wxml2canvas } from '@/components'\nimport { AtButton } from 'taro-ui'\nimport { saveImage } from '@/utils'\nimport getData from './demo.js'\n\nimport './index.less'\n\n\nexport default function GradeShare() {\n\n  const { wxml, style, height } = getData()\n  let imageSrc = ''\n\n  return (\n    <View className=\"share-grade\">\n      <Wxml2canvas width=\"375px\" wxml={wxml} style={style} height={height + 'px'} onImageLoaded={(url) => { imageSrc = url }}></Wxml2canvas>\n      <AtButton className=\"extra-button\" type=\"primary\" onClick={() => saveImage(imageSrc)}>保存海报</AtButton>\n    </View>\n  )\n}\n","import bg from '../res/grade-share/bg.png'\nimport g00 from '../res/grade-share/00.png'\nimport g01 from '../res/grade-share/01.png'\nimport g02 from '../res/grade-share/02.png'\nimport g03 from '../res/grade-share/03.png'\nimport g04 from '../res/grade-share/04.png'\nimport qr from '../res/grade-share/qr.png'\n\nexport default function getData() {\n  const gradeData = JSON.parse(wx.getStorageSync('grade:data') || '{}')\n  const { grade = [], gpa } = gradeData\n  let gradeStr = ''\n\n  let notPassCount = 0 // 不通过的数量\n\n  grade.forEach((item, index) => {\n    if (index === 0) {\n      return\n    }\n\n    if (item.passSign !== '及格') {\n      notPassCount += 1\n    }\n\n    const nameStr = item.gradeName.split('').reduce((pre, name) => {\n      pre += `<text class=\"content-span\">${name}</text>`\n      return pre\n    }, '')\n\n    gradeStr += `\n      <view class=\"grade-content grade-line-${index % 2}\">\n        <text class=\"grade-content-1\">${nameStr}</text>\n        <text class=\"grade-content-2\"><text class=\"content-span2\">${item.mark}</text></text>\n        <text class=\"grade-content-3\"><text class=\"content-span2\">${item.passSign}</text></text>\n        <text class=\"grade-content-4\"><text class=\"content-span2\">${item.credit}</text></text>\n      </view>\n    `\n  })\n\n  let gradIcon = g00\n\n  if (notPassCount === 0 && gpa >= 3.50) {\n    // 考神\n    gradIcon = g00\n  } else if (notPassCount === 0 && (gpa < 3.50 && gpa >= 2.75)) {\n    gradIcon = g01\n  } else if (notPassCount === 0 && gpa < 2.75) {\n    gradIcon = g02\n  } else if (notPassCount === 1) {\n    gradIcon = g03\n  } else if (notPassCount >= 2) {\n    gradIcon = g04\n  }\n\n  const wxml = `\n    <view class=\"container\" >\n      <image class=\"bg1\" src=\"${bg}\"></image>\n      <view class=\"gradewrap\">\n        <view class=\"grade-title\">\n          <text class=\"grade-title-1\">课程</text>\n          <text class=\"grade-title-2\">成绩</text>\n          <text class=\"grade-title-3\">及格标志</text>\n          <text class=\"grade-title-4\">学分</text>\n        </view>\n        ${gradeStr}\n        <text class=\"gpa\">平均学分绩点(GPA): ${gpa}</text>\n        <image class=\"yinzhang\" src=\"${gradIcon}\"></image>\n      </view>\n\n      <view class=\"other\">\n        <image class=\"qr\" src=\"${qr}\"></image>\n      </view>\n    </view>\n  `\n\n  //\n  // marginBottom: 139\n  // 139 + 20 + 20 + n * 30\n\n  const contentHeight = 139 + 20 + 20 + (grade.length - 1) * 40 + 30\n\n  const canvasHeight =\n    38 + // 顶部 margin\n    contentHeight + // 成绩部分\n    40 + 96 + 60\n\n  const style = {\n    container: {\n      width: 375,\n      height: canvasHeight,\n      backgroundColor: '#fff000'\n    },\n\n    gradewrap: {\n      width: 320,\n      height: contentHeight,\n      borderWidth: 1.5,\n      borderRadius: 20,\n      borderColor: '#333333',\n      backgroundColor: '#ffffff',\n      marginTop: 38,\n      position: 'relative',\n      marginLeft: 28\n    },\n\n    gradeTitle: {\n      width: 315,\n      height: 20,\n      marginTop: 20,\n      justifyContent: 'center',\n      flexDirection: 'row',\n      color: '#cccccc'\n    },\n    gradeTitle1: {\n      width: 135,\n      height: 20,\n      textAlign: 'center'\n    },\n    gradeTitle2: {\n      width: 60,\n      height: 20,\n      textAlign: 'center'\n    },\n    gradeTitle3: {\n      width: 60,\n      height: 20,\n      textAlign: 'center'\n    },\n    gradeTitle4: {\n      width: 60,\n      height: 20,\n      textAlign: 'center'\n    },\n\n    gradeContent: {\n      width: 315,\n      height: 40,\n      justifyContent: 'center',\n      flexDirection: 'row',\n      verticalAlign: 'center',\n      lineHeight: '1.6em',\n      fontSize: 12\n    },\n    contentSpan: {\n      width: 16,\n      height: 16\n    },\n    contentSpan2: {\n      width: 60,\n      height: 16\n    },\n    gradeLine1: {\n      backgroundColor: '#ffffff'\n    },\n    gradeLine0: {\n      backgroundColor: '#f7f7f7'\n    },\n    gradeContent1: {\n      width: 135,\n      height: 40,\n      textAlign: 'center',\n      justifyContent: 'center',\n      flexDirection: 'row',\n      alignItems: 'center',\n      flexWrap: 'wrap'\n    },\n    gradeContent2: {\n      width: 60,\n      height: 40,\n      textAlign: 'center',\n      justifyContent: 'center',\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    gradeContent3: {\n      width: 60,\n      height: 40,\n      textAlign: 'center',\n      justifyContent: 'center',\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    gradeContent4: {\n      width: 60,\n      height: 40,\n      textAlign: 'center',\n      justifyContent: 'center',\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n\n    text1: {\n      width: 200,\n      height: 300\n    },\n    yinzhang: {\n      width: 173,\n      height: 99.5,\n      marginTop: 18,\n      marginLeft: 71\n    },\n    bg1: {\n      width: 375,\n      height: 418.5,\n      position: 'absolute'\n    },\n    red: {\n      backgroundColor: '#ff0000'\n    },\n    green: {\n      backgroundColor: '#00ff00'\n    },\n    blue: {\n      backgroundColor: '#0000ff',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    other: {\n      width: 375,\n      height: 96,\n      marginTop: 40,\n      justifyContent: 'center',\n      flexDirection: 'row'\n    },\n    qr: {\n      width: 328,\n      height: 96\n    },\n    gpa: {\n      width: 320,\n      height: 20,\n      color: '#000000',\n      // textAlign: 'center',\n      // fontSize: 20,\n      marginTop: 10,\n      marginLeft: 20\n    }\n  }\n\n  return {\n    wxml,\n    style,\n    height: canvasHeight\n  }\n}\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../../node_modules/.pnpm/babel-loader@8.2.1_@babel+core@7.26.9_webpack@5.78.0_@swc+core@1.3.23_/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"成绩分享\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages2/grade/share/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}