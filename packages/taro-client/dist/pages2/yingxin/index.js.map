{"version":3,"file":"pages2/yingxin/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AA+BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAgBA;AAGA;AACA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA7EA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAoEA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAEA;AAAA;AAGA;AACA;AACA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAIA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAIA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAIA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAIA;AACA;AACA;AACA;AAEA;AAGA;AAAA;AAAA;AAGA;AAAA;AACA;AACA;AAAA;AAEA;;;;;;;;;;;;;AC1QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://wechat-app-hrbust/._src_pages2_yingxin_index.tsx","webpack://wechat-app-hrbust/./src/pages2/yingxin/index.tsx?8201"],"sourcesContent":["import React, { Component, Fragment } from 'react'\nimport { connect } from 'react-redux'\nimport { View, Text, Ad } from '@tarojs/components'\nimport Taro from '@tarojs/taro'\nimport { IRootState } from '@/types'\nimport { AtButton, AtInput, AtTimeline } from 'taro-ui'\nimport request from '@/utils/request'\nimport './index.less'\n\ntype PropsFromState = ReturnType<typeof mapStateToProps>\n\ntype PropsFromDispatch = {}\n\ntype PageOwnProps = {}\n\ntype PageState = {\n  id: string\n  password: string\n  yingxinData?: {\n    getStudentInformat: {\n      XM: string\n      UNIT_NAME: string\n      MAJOR_NAME: string\n      KSH: string\n      CLASS_NAME: string\n      XH: string\n      COUN_XM: string\n      COUN_TEL: string\n      ROOM_NAME: string\n    }\n    getPayment: {\n      PRICE: string\n    }[]\n  }\n}\n\ntype IProps = PropsFromState & PropsFromDispatch & PageOwnProps\n\nclass YingXin extends Component<IProps, PageState> {\n  state: Readonly<PageState> = {\n    id: '',\n    password: '',\n    yingxinData: undefined\n    // yingxinData: {\n    //   getStudentInformat: {\n    //     XM: 100,\n    //     UNIT_NAME: 200,\n    //     MAJOR_NAME: 300,\n    //     KSH: 400,\n    //     CLASS_NAME: 500,\n    //     XH: 500,\n    //     COUN_XM: 500,\n    //     COUN_TEL: 500,\n    //     ROOM_NAME: 500,\n    //   },\n    //   getPayment: [{\n    //     PRICE: 600,\n    //   }, {\n    //   PRICE: 600,\n    // }]\n  }\n\n  componentDidShow() {}\n\n  onLoad() {\n    const storageData = Taro.getStorageSync('yingxin:data')\n    if (storageData) {\n      const { id, password } = JSON.parse(storageData)\n      this.setState({\n        id,\n        password\n      })\n    }\n  }\n\n  onInputChange = (key: keyof PageState, value) => {\n    const state = {\n      [key]: value\n    } as PageState\n    this.setState(state)\n  }\n\n  onConfirm = () => {\n    const { id, password } = this.state\n    let msg = ''\n    if (!id) {\n      msg = '请输14位考生号'\n    }\n    if (!password) {\n      msg = '请输入密码'\n    }\n    if (msg) {\n      Taro.showToast({\n        title: '请输入密码',\n        icon: 'none',\n        duration: 1000\n      })\n      return\n    }\n    this.getYingxin(id, password)\n  }\n\n  getYingxin = (id: string, password: string) => {\n    const data = { id, password }\n\n    Taro.setStorageSync('yingxin:data', JSON.stringify(data))\n\n    Taro.showLoading({\n      title: '加载中...'\n    })\n\n    return request({\n      url: '/api/yingxin',\n      data\n    })\n      .then(res => {\n        Taro.hideLoading()\n\n        if (res?.data?.data?.length > 0) {\n          this.setState({\n            yingxinData: res?.data?.data || {}\n          })\n        } else {\n          this.showError()\n        }\n      })\n      .catch(() => {\n        Taro.hideLoading()\n\n        this.showError()\n      })\n  }\n\n  showError = () => {\n    Taro.showModal({\n      title: '查询失败',\n      content: '请检查14位考生号和6位身份证尾号是否正确，再重新查询~',\n      showCancel: false\n    })\n  }\n\n  render() {\n    const { yingxinData, id, password } = this.state\n\n    return (\n      <View className=\"yingxin-page\">\n        {!yingxinData && (\n          <Fragment>\n            <View className=\"input-container\">\n              <AtInput\n                name=\"id\"\n                title=\"考生号\"\n                type=\"text\"\n                placeholder=\"请输入考生号\"\n                value={id}\n                onChange={e => this.onInputChange('id', e)}\n                focus\n              ></AtInput>\n              <AtInput\n                name=\"password\"\n                title=\"密码\"\n                type=\"text\"\n                placeholder=\"密码(初始身份证后六位)\"\n                value={password}\n                onChange={e => this.onInputChange('password', e)}\n              ></AtInput>\n              <View className=\"info-wrapper\">\n                <View className=\"info\">\n                  *注1：登录用户名为14位考生号，14位考生号为(年份(2位)+省份代码(2位)+10位考生号)，例如黑龙江省考生需在10位考生号前加(1923)。\n                </View>\n                <View className=\"info\">\n                  *注2：初始密码为身份证号后六位（如最后一位X，需要大写）。\n                </View>\n              </View>\n              <AtButton\n                className=\"button\"\n                type=\"primary\"\n                onClick={this.onConfirm}\n              >\n                查询\n              </AtButton>\n              <Ad className=\"advertising\" unitId=\"adunit-2d76930b51ac0dbe\"></Ad>\n            </View>\n          </Fragment>\n        )}\n\n        {yingxinData && (\n          <Fragment>\n            <View className=\"title\">新生信息</View>\n            <View className=\"info-wrapper\">\n              <View className=\"info\">\n                更多信息（在线缴费等）请浏览器访问{' '}\n                <Text user-select>http://yingxin.hrbust.edu.cn</Text> 查看\n              </View>\n            </View>\n\n            <AtTimeline\n              className=\"time-line\"\n              items={[\n                {\n                  title: '姓名',\n                  content: [yingxinData.getStudentInformat.XM],\n                  icon: 'stop'\n                },\n                {\n                  title: '专业',\n                  content: [\n                    `学院：${yingxinData.getStudentInformat.UNIT_NAME}`,\n                    `专业：${yingxinData.getStudentInformat.MAJOR_NAME}`\n                  ],\n                  icon: 'stop'\n                },\n                {\n                  title: '考生号',\n                  content: [yingxinData.getStudentInformat.KSH],\n                  icon: 'stop'\n                },\n                {\n                  title: '班级',\n                  content: [yingxinData.getStudentInformat.CLASS_NAME],\n                  icon: 'stop'\n                },\n                {\n                  title: '学号',\n                  content: [yingxinData.getStudentInformat.XH],\n                  icon: 'stop'\n                },\n                {\n                  title: '辅导员',\n                  content: [\n                    `姓名：${yingxinData.getStudentInformat.COUN_XM}`,\n                    `电话：${yingxinData.getStudentInformat.COUN_TEL}`\n                  ],\n                  icon: 'stop'\n                },\n                {\n                  title: '寝室',\n                  content: [yingxinData.getStudentInformat.ROOM_NAME],\n                  icon: 'stop'\n                },\n                {\n                  title: '寝室',\n                  content: [yingxinData.getStudentInformat.ROOM_NAME],\n                  icon: 'stop'\n                },\n                {\n                  title: '学费',\n                  content: [\n                    `学费：${yingxinData.getPayment[0].PRICE}元`,\n                    `住宿费：${yingxinData.getPayment[1].PRICE}元`\n                  ],\n                  icon: 'stop'\n                }\n              ]}\n            ></AtTimeline>\n          </Fragment>\n        )}\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state: IRootState) => ({\n  user: state.user\n})\n\nexport default connect<PropsFromState, PropsFromDispatch, PageOwnProps>(\n  mapStateToProps\n)(YingXin)\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../../node_modules/.pnpm/babel-loader@8.2.1_@babel+core@7.26.9_webpack@5.78.0_@swc+core@1.3.23_/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"智能迎新\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages2/yingxin/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}